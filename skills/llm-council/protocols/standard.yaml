# LLM Council - Standard Protocol Manifest v4.2
# Manifest format: indexes prompts and rubrics, auto-detects evaluation criteria

version: "4.2"

metadata:
  name: standard-council
  description: |
    Multi-LLM deliberation protocol with mandatory cross-evaluation.
    Dynamically discovers available LLMs - no predefined roles.

# ============================================================
# RESOURCES
# ============================================================

resources:
  prompts:
    stage1_collect: prompts/stage1_collect.md
    stage2_evaluate: prompts/stage2_evaluate.md
    stage3_synthesize: prompts/stage3_synthesize.md

  rubrics:
    default: null  # Use SKILL.md embedded default
    domains:
      code-review: rubrics/code-review.yaml
      factual-qa: rubrics/factual-qa.yaml
      technical-decision: rubrics/technical-decision.yaml

# ============================================================
# RUBRIC DETECTION
# ============================================================

rubric_detection:
  code-review:
    keywords:
      - "review"
      - "code"
      - "PR"
      - "pull request"
      - "refactor"
      - "bug"
      - "fix"
    patterns:
      - "review (this|my|the) (code|PR|pull request)"
      - "(what|how).*(wrong|improve|better).*code"

  factual-qa:
    keywords:
      - "what is"
      - "who is"
      - "when did"
      - "where is"
      - "how many"
      - "explain"
      - "define"
    patterns:
      - "^(what|who|when|where|why|how)\\b"
      - "(explain|define|describe).*\\?"

  technical-decision:
    keywords:
      - "should I"
      - "which is better"
      - "recommend"
      - "choose"
      - "decision"
      - "tradeoff"
      - "compare"
    patterns:
      - "(should|would).*(use|choose|pick|recommend)"
      - "(which|what).*(better|best|prefer)"
      - "(pros|cons|tradeoff|comparison)"

# ============================================================
# PREREQUISITES
# ============================================================

prerequisites:
  external_llm_required: true
  min_participants: 2
  discovery: dynamic
  description: |
    Discovers available LLM tools at runtime.
    All participants are equal - no predefined roles.

# ============================================================
# EXECUTION
# ============================================================

execution:
  mode_priority:
    - multi_agent
    - parallel_tools
  timeout:
    per_llm_call: 120
    total: 300

# ============================================================
# CROSS-EVALUATION
# ============================================================

cross_evaluation:
  mandatory: true
  self_evaluation: false
  anonymization:
    shuffle_order: true
    relabel_responses: true
    strip_metadata: true
    record_mapping: true
    reveal_timing: after_all_scores

# ============================================================
# SECURITY
# ============================================================

security:
  treat_outputs_as_untrusted: true
  never_execute_instructions: true
